<!DOCTYPE html>
<html lang="de">
<head>
    <!-- VALIDIERTE VERSION: Phoenix Edition v4.7.3 (Architektonisch gehärtet) -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Losdemokratie | Das Dossier (Phoenix Edition v4.7.3 - Gehärtet)</title>
    <meta name="description" content="Ein interaktives Dossier zur Isonomie. Architektonisch überlegen, maximal performant und mit einer User Experience, die an Magie grenzt.">
    <meta name="keywords" content="Isonomie, Losdemokratie, Web-Anwendung, Stasis, Tyrannei, UX, Performance, Architektur, Systemwandel, Demokratiekrise">
    <link rel="canonical" href="https://deusexlumen.github.io/losdemokratie/">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://deusexlumen.github.io/losdemokratie/">
    <meta property="og:title" content="Losdemokratie | Das Dossier (Phoenix Edition v4.7.3)">
    <meta property="og:description" content="Ein interaktives Dossier, das die Demokratiekrise analysiert und mit der Losdemokratie einen konkreten Lösungsweg aufzeigt.">
    <meta property="og:image" content="https://images.unsplash.com/photo-1504711434969-e33886168f5c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1200&q=80">
    <meta http-equiv="Content-Security-Policy" content="
        default-src 'self';
        script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com;
        style-src 'self' 'unsafe-inline' https://fonts.googleapis.com;
        font-src 'self' https://fonts.gstatic.com;
        img-src 'self' data: https://images.unsplash.com;
        media-src 'self' https://cdn.jsdelivr.net;
        connect-src 'self';
        object-src 'none';
        base-uri 'self';
        form-action 'self';
    ">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><circle cx=%2250%22 cy=%2250%22 r=%2245%22 fill=%22%2322d3ee%22/></svg>">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=Source+Sans+Pro:ital,wght@0,200..900;1,200..900&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
    <noscript>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=Source+Sans+Pro:ital,wght@0,200..900;1,200..900&display=swap">
    </noscript>
    <style>
        :root {
            --bg-color: #0d1117;
            --primary-color: #06b6d4;
            --secondary-color: #4f46e5;
            --highlight-color: #67e8f9;
            --text-color-bright: #e6edf3;
            --text-color-dim: #7d8590;
            --text-muted: #8b949e;
            --heading-color: #f0f6fc;
            --border-color: rgba(209, 213, 219, 0.1);
            --card-bg: rgba(22, 27, 34, 0.5);
            --font-heading: 'Inter', sans-serif;
            --font-main: 'Source Sans Pro', sans-serif;
            --border-radius: 16px;
            --shadow-glow: 0 0 24px var(--primary-color-translucent, rgba(34, 211, 238, 0.4)), 0 0 12px var(--primary-color-translucent, rgba(34, 211, 238, 0.3));
            --cta-color: #a855f7;
            --aurora-x: 50%;
            --aurora-y: 50%;
            --scroll-lerp: 0;
            --underline-scale: 1;
            --underline-width: 0%;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            font-family: var(--font-main);
            background-color: var(--bg-color);
            color: var(--text-color-dim);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden;
            position: relative;
            cursor: auto;
            font-synthesis: none;
        }

        .aurora-background { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -2; overflow: hidden; }
        .aurora-background::after { content: ''; position: absolute; inset: 0; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E"); opacity: 0.025; z-index: -1; pointer-events: none; }
        body:not(.low-performance-mode) .aurora-background { filter: blur(120px); opacity: 0.7; }
        .aurora-background .blob { position: absolute; border-radius: 50%; }
        body:not(.low-performance-mode) .aurora-background .blob { will-change: transform; }
        .aurora-background .blob.b1 { background: var(--primary-color); width: 500px; height: 500px; transform: translate(calc(var(--aurora-x) * 0.8), calc(var(--aurora-y) * 0.8)); transition: background-color 1.5s ease; }
        .aurora-background .blob.b2 { background: var(--secondary-color); width: 400px; height: 400px; transform: translate(calc(var(--aurora-x) * 1.2), calc(var(--aurora-y) * 1.2)); transition: background-color 1.5s ease; }

        .scroll-progress-bar { position: fixed; top: 0; left: 0; width: 100%; height: 4px; background: var(--primary-color); transform-origin: 0%; transform: scaleX(0); z-index: 2000; will-change: transform; transition: background-color 1.5s ease; }
        .page-header { height: 100vh; display: flex; flex-direction: column; justify-content: center; text-align: center; padding: 2rem; position: relative; transform-style: preserve-3d; }
        .header-content { will-change: opacity, transform; }
        
        .page-header .fade-up-header {
            font-size: clamp(2.8rem, 8vw, 6.5rem);
            color: var(--heading-color);
            font-weight: 800;
            overflow: hidden;
            position: relative;
            padding-bottom: 0.2em;
        }
        .page-header .fade-up-header::after {
            content: '';
            position: absolute;
            left: 50%;
            bottom: 0;
            height: 4px;
            width: var(--underline-width, 0%);
            background-color: var(--primary-color);
            transform: translateX(-50%);
            transition: background-color 1.5s ease;
        }
        .page-header .fade-up-header .char {
            display: inline-block;
            will-change: transform, opacity;
        }

        .page-header .subtitle { font-family: var(--font-heading); font-size: clamp(1.1rem, 2.5vw, 1.5rem); color: var(--text-muted); margin-top: 1.5rem; text-wrap: balance; font-weight: 400; will-change: transform, opacity; }
        
        .scroll-indicator { position: absolute; bottom: 2rem; left: 50%; transform: translateX(-50%); opacity: 0; animation: fadeInScrollIndicator 1s ease 2.5s forwards; }
        .mouse { width: 28px; height: 48px; border: 2px solid var(--text-muted); border-radius: 14px; position: relative; }
        .mouse::before { content: ''; position: absolute; top: 8px; left: 50%; transform: translateX(-50%); width: 4px; height: 8px; background-color: var(--text-muted); border-radius: 2px; opacity: 1; animation: scroll-wheel 2s infinite; }
        @keyframes scroll-wheel { 0% { top: 8px; opacity: 1; } 50% { opacity: 1; } 100% { top: 24px; opacity: 0; } }
        @keyframes fadeInScrollIndicator { to { opacity: 0.7; } }

        .narrative-interface { display: grid; grid-template-columns: 3fr 7fr; max-width: 1400px; margin: 5rem auto; padding: 0 1.5rem; gap: 3rem; align-items: start; }
        .bento-nav { position: sticky; top: 2rem; }
        .bento-grid { display: grid; gap: 1rem; list-style: none; }
        .bento-cell { display: block; text-decoration: none; color: inherit; background: var(--card-bg); border: 1px solid var(--border-color); border-radius: var(--border-radius); padding: 1.5rem; backdrop-filter: blur(12px); transition: border-color 0.4s ease, box-shadow 0.4s ease, transform 0.4s ease; position: relative; }
        .bento-cell.is-active { border-color: var(--primary-color); box-shadow: var(--shadow-glow); }
        .bento-cell:not(.is-active):hover { box-shadow: 0 0 16px var(--primary-color-translucent, rgba(34, 211, 238, 0.2)); transform: translateY(-3px); }
        .bento-cell:focus-visible { outline: 2px solid var(--primary-color); outline-offset: 2px; }
        .bento-cell h3 { color: var(--heading-color); margin-bottom: 0.25rem; font-size: 1.25rem; padding-right: 30px; font-weight: 700; }
        .bento-cell p { font-size: 0.9rem; color: var(--text-muted); font-weight: 400; }
        .bento-icon-wrapper { position: absolute; top: 1.5rem; right: 1.5rem; width: 24px; height: 24px; will-change: transform; }
        .bento-checkmark, .bento-progress-circle { position: absolute; top: 0; left: 0; width: 100%; height: 100%; fill: none; }
        .bento-checkmark { stroke: var(--primary-color); stroke-width: 3; transition: stroke 1.5s ease; opacity: 0; }
        .bento-checkmark path { stroke-dasharray: 25; stroke-dashoffset: 25; }
        .bento-progress-circle { transform: rotate(-90deg); transform-origin: center; transition: opacity 0.4s ease; }
        .bento-progress-circle .progress-track { stroke: var(--border-color); stroke-width: 2; }
        .bento-progress-circle .progress-path { stroke: var(--primary-color); stroke-width: 2.5; stroke-linecap: round; stroke-dasharray: 63; stroke-dashoffset: 63; transition: stroke 1.5s ease; }
        
        .focus-pane { position: relative; }
        .content-section { min-height: 80vh; padding: clamp(1rem, 5vh, 4rem) 0; }
        .content-section h2 { font-size: clamp(2.2rem, 5vw, 3rem); color: var(--heading-color); font-weight: 800; margin-bottom: 2.5rem; padding-bottom: 1.25rem; position: relative; overflow: hidden; }
        .content-section h2::before { content: ''; position: absolute; left: 0; bottom: 0; width: 80px; height: 4px; background: var(--primary-color); border-radius: 2px; transform: scaleX(var(--underline-scale)); transform-origin: left; transition: background-color 1.5s ease; will-change: transform; }
        
        .content-section h2 .word { display: inline-block; margin-right: 0.25em; }
        .content-section h2 .char { display: inline-block; will-change: transform, opacity; }

        .content-section h4 { font-family: var(--font-heading); color: var(--highlight-color); font-size: 1.4rem; margin-top: 2.5rem; margin-bottom: 1rem; transition: color 1.5s ease; font-weight: 700; }
        .content-section p, .content-section li { font-size: 1.15rem; line-height: 1.8; color: color-mix(in srgb, var(--text-color-dim) calc(100% - var(--scroll-lerp) * 100%), var(--text-color-bright) calc(var(--scroll-lerp) * 100%)); font-weight: 400; }
        .content-section p + p, .content-section h4 + p { margin-top: 1.5rem; }
        body:not(.low-performance-mode) .content-section p, body:not(.low-performance-mode) .content-section li { transition: color 0.1s linear; }
        .content-section ul { padding-left: 1.5rem; list-style-position: outside; margin-top: 1.5rem; }
        .content-section a { color: var(--primary-color); text-decoration: none; font-weight: 700; position: relative; }
        .content-section a::after { content: ''; position: absolute; bottom: -4px; left: 0; width: 100%; height: 2px; background: linear-gradient(90deg, var(--primary-color), var(--highlight-color)); transform: scaleX(0); transform-origin: right; transition: transform 0.4s cubic-bezier(0.25, 1, 0.5, 1), background 1.5s ease; }
        .content-section a:hover::after, .content-section a:focus-visible::after { transform: scaleX(1); transform-origin: left; }
        .content-section a:hover, .content-section a:focus-visible { color: var(--highlight-color); text-decoration: none; }

        .btn { display: inline-block; background-color: var(--primary-color); color: var(--bg-color); padding: 0.8rem 2rem; border-radius: 8px; text-decoration: none; font-family: var(--font-heading); font-weight: 700; font-size: 1.1rem; margin-top: 1.5rem; box-shadow: 0 4px 15px rgba(34, 211, 238, 0.2); transition: transform 0.3s, box-shadow 0.3s, background-color 1.5s, color 0.3s; }
        .btn:hover, .btn:focus-visible { transform: scale(1.05) translateY(-2px); box-shadow: 0 8px 25px rgba(34, 211, 238, 0.3); }
        .btn.btn-cta { background-color: var(--cta-color); box-shadow: 0 4px 15px rgba(168, 85, 247, 0.3); position: relative; overflow: hidden; z-index: 1; }
        .btn.btn-cta:hover, .btn.btn-cta:focus-visible { box-shadow: 0 8px 25px rgba(168, 85, 247, 0.4); }
        .btn.btn-cta::before { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(120deg, transparent, rgba(255, 255, 255, 0.3), transparent); transition: left 0.7s cubic-bezier(0.25, 1, 0.5, 1); z-index: -1; }
        .btn.btn-cta:hover::before, .btn.btn-cta:focus-visible::before { left: 100%; }

        .perf-toggle-button { position: fixed; bottom: 1rem; right: 1rem; z-index: 3000; background: var(--card-bg); border: 1px solid var(--border-color); color: var(--text-muted); font-size: 0.75rem; padding: 0.5rem 0.8rem; border-radius: 8px; cursor: pointer; backdrop-filter: blur(10px); transition: background-color 0.2s ease, color 0.2s ease; }
        .perf-toggle-button:hover, .perf-toggle-button:focus-visible { background: var(--bg-color); color: var(--text-color-bright); }

        .page-footer { max-width: 1400px; margin: 4rem auto 0; padding: 2rem 1.5rem; border-top: 1px solid var(--border-color); text-align: center; color: var(--text-muted); font-size: 0.9rem; }
        .page-footer a { color: var(--primary-color); font-weight: normal; transition: color 1.5s ease; }
        .page-footer a:hover, .page-footer a:focus-visible { color: var(--highlight-color); text-decoration: underline; }

        .audio-feature-box { background: rgba(22, 27, 34, 0.7); border: 1px solid var(--border-color); border-radius: var(--border-radius); padding: 1.5rem 2rem; margin: 2.5rem 0; backdrop-filter: blur(10px); transition: transform 0.4s ease, box-shadow 0.4s ease; }
        .audio-feature-box:hover { transform: translateY(-5px); box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2); }
        .audio-feature-box h4 { color: var(--highlight-color); font-family: var(--font-heading); font-size: 1.2rem; margin-bottom: 0.5rem; margin-top: 0; transition: color 1.5s ease; font-weight: 700; }
        .audio-feature-box .audio-description { font-size: 1rem !important; line-height: 1.6 !important; margin-bottom: 1.5rem; color: var(--text-muted) !important; }
        .audio-player-hidden { display: none; }
        .custom-audio-player { display: flex; align-items: center; gap: 0.75rem; width: 100%; }
        .skip-btn, .play-pause-btn { background: none; border: 2px solid var(--primary-color); border-radius: 50%; width: 40px; height: 40px; display: flex; justify-content: center; align-items: center; cursor: pointer; padding: 0; flex-shrink: 0; transition: background-color 0.3s, border-color 1.5s, opacity 0.3s; }
        .skip-btn:hover, .play-pause-btn:hover, .skip-btn:focus-visible, .play-pause-btn:focus-visible { background-color: rgba(255, 255, 255, 0.1); }
        .skip-btn:disabled, .play-pause-btn:disabled { cursor: not-allowed; opacity: 0.5; }
        .skip-btn svg, .play-pause-btn svg { fill: var(--primary-color); width: 22px; height: 22px; transition: fill 1.5s ease; }
        .play-pause-btn svg { width: 18px; height: 18px; }
        .play-pause-btn .icon-play { display: block; }
        .play-pause-btn .icon-pause { display: none; }
        .custom-audio-player.is-playing .icon-play { display: none; }
        .custom-audio-player.is-playing .icon-pause { display: block; }
        .speed-btn { background: none; border: none; color: var(--text-muted); cursor: pointer; font-family: var(--font-heading); font-weight: 700; font-size: 0.9rem; padding: 0.5rem; border-radius: 4px; min-width: 50px; text-align: center; transition: background-color 0.2s ease, color 0.2s ease, opacity 0.3s; font-variant-numeric: tabular-nums; }
        .speed-btn:hover, .speed-btn:focus-visible { background-color: rgba(255, 255, 255, 0.1); color: var(--text-color-bright); }
        .speed-btn:disabled { cursor: not-allowed; opacity: 0.5; }
        .audio-progress-container { flex-grow: 1; height: 8px; background-color: rgba(255, 255, 255, 0.1); border-radius: 4px; cursor: pointer; transition: background-color 0.3s ease, pointer-events 0.3s; }
        .audio-progress-bar { width: 0%; height: 100%; background-color: var(--primary-color); border-radius: 4px; transition: background-color 1.5s ease; }
        .audio-time { font-size: 0.85rem; color: var(--text-muted); min-width: 90px; display: flex; justify-content: center; font-variant-numeric: tabular-nums; gap: 0.25rem; }
        .custom-audio-player.has-error .audio-progress-container { background-color: #402020; }
        .audio-visualizer { width: 100px; height: 30px; flex-shrink: 0; opacity: 0.6; transition: opacity 0.3s ease; }
        .custom-audio-player:hover .audio-visualizer { opacity: 1; }

        #knowledge-distillate { margin-top: 5rem; padding: 3rem 0; border-top: 1px solid var(--border-color); opacity: 0; transform: translateY(20px); transition: opacity 1s ease, transform 1s ease; }
        #knowledge-distillate.is-visible { opacity: 1; transform: translateY(0); }
        #distillate-title { font-size: clamp(2rem, 5vw, 2.5rem); color: var(--heading-color); margin-bottom: 2rem; font-weight: 800; }
        #knowledge-distillate ul { list-style: none; padding: 0; counter-reset: takeaway-counter; }
        #knowledge-distillate li { font-size: 1.2rem; line-height: 1.7; color: var(--text-color-bright); margin-bottom: 1.5rem; padding-left: 2.5rem; position: relative; }
        #knowledge-distillate li::before { counter-increment: takeaway-counter; content: counter(takeaway-counter); position: absolute; left: 0; top: 0.2rem; width: 1.8rem; height: 1.8rem; background: var(--primary-color); color: var(--bg-color); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-family: var(--font-heading); font-weight: 700; transition: background-color 1.5s ease; }

        .final-actions { margin-top: 5rem; }
        .final-actions-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 3rem; margin-top: 2rem; }
        #final-cta { font-size: clamp(2rem, 5vw, 2.5rem); color: var(--heading-color); font-weight: 800; }
        .final-actions-grid h3 { font-family: var(--font-heading); color: var(--highlight-color); font-size: 1.4rem; margin-bottom: 1rem; transition: color 1.5s ease; font-weight: 700; }
        .final-actions-grid p, .final-actions-grid li { font-size: 1.1rem; line-height: 1.7; }
        .final-actions-grid ul { list-style: none; padding: 0; margin-top: 1.5rem; }
        .final-actions-grid li { margin-bottom: 1rem; transition: color 0.3s ease; padding-left: 1.5rem; position: relative; }
        .final-actions-grid li::before { content: '→'; position: absolute; left: 0; top: 1px; color: var(--primary-color); transition: transform 0.4s cubic-bezier(0.25, 1, 0.5, 1), color 1.5s ease; }
        .final-actions-grid li:hover { color: var(--text-color-bright); }
        .final-actions-grid li:hover::before { transform: translateX(5px) rotate(360deg); }
        .final-actions-grid .btn-cta { margin-top: 2rem; }

        .share-buttons { margin-top: 2rem; display: flex; flex-wrap: wrap; gap: 1rem; }
        .share-btn { display: inline-flex; align-items: center; gap: 0.5rem; background: var(--card-bg); border: 1px solid var(--border-color); color: var(--text-muted); padding: 0.6rem 1.2rem; border-radius: 8px; text-decoration: none; font-size: 0.9rem; font-weight: bold; transition: background-color 0.3s, color 0.3s, border-color 0.3s, transform 0.3s; }
        .share-btn:hover, .share-btn:focus-visible { background-color: var(--bg-color); color: var(--text-color-bright); border-color: var(--primary-color); transform: translateY(-2px); }
        .share-btn svg { transition: fill 0.3s ease; }

        .sr-only { position: absolute; width: 1px; height: 1px; margin: -1px; padding: 0; overflow: hidden; clip: rect(0, 0, 0, 0); border: 0; }
        .skip-link { position: absolute; top: -999px; left: 0; background: var(--primary-color); color: var(--bg-color); padding: 1rem; z-index: 9999; transition: top 0.3s ease-in-out, background-color 1.5s ease; font-weight: 700; border-bottom-right-radius: 8px; }
        .skip-link:focus { top: 0; }
        
        .narrative-thread-container {
            position: absolute;
            top: 0;
            left: -1.5rem;
            width: 40px;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }
        .narrative-thread {
            width: 100%;
            height: 100%;
            overflow: visible;
        }
        .narrative-thread-path {
            stroke: var(--primary-color);
            transition: stroke 1.5s ease;
        }

        @media (max-width: 1024px) {
            .narrative-interface { grid-template-columns: 1fr; }
            .bento-nav { position: static; }
            .perf-toggle-button { display: none; }
            .final-actions-grid { grid-template-columns: 1fr; }
            .audio-visualizer { display: none; }
            .custom-audio-player { flex-wrap: wrap; }
            .audio-progress-container { order: -1; width: 100%; margin-bottom: 1rem; }
            .narrative-thread-container { left: -0.5rem; }
        }
        
        @media (max-width: 768px) {
            .narrative-thread-container { display: none; }
        }
    </style>
</head>
<body>
    <a href="#main-content" class="skip-link">Zum Inhalt springen</a>
    <div class="aurora-background" aria-hidden="true">
        <div class="blob b1"></div>
        <div class="blob b2"></div>
    </div>
    <div class="scroll-progress-bar" aria-hidden="true"></div>
    <div aria-live="polite" class="sr-only"></div>
    <header class="page-header">
        <div class="header-content">
            <h1 class="fade-up-header">Der Plan für einen echten Systemwandel.</h1>
            <p class="subtitle">Das umfassende Dossier zur Isonomie.</p>
        </div>
        <div class="scroll-indicator" aria-hidden="true">
            <div class="mouse"></div>
        </div>
    </header>
    <main id="main-content" class="narrative-interface">
        <nav class="bento-nav" id="bento-navigation" aria-label="Dossier Navigation">
            <!-- Bento Grid Inhalt bleibt unverändert -->
            <ul class="bento-grid">
                <li><a href="#part1" class="bento-cell" id="nav-part1"><div class="bento-icon-wrapper"><svg class="bento-progress-circle" viewBox="0 0 24 24" aria-hidden="true"><circle class="progress-track" cx="12" cy="12" r="10"></circle><circle class="progress-path" cx="12" cy="12" r="10"></circle></svg><svg class="bento-checkmark" viewBox="0 0 24 24" aria-hidden="true"><path d="M4 12.75L9 17.75L20 6.75"></path></svg></div><h3>1. Der Ursprung</h3><p>Die Krise der Gegenwart.</p></a></li>
                <li><a href="#part2" class="bento-cell" id="nav-part2"><div class="bento-icon-wrapper"><svg class="bento-progress-circle" viewBox="0 0 24 24" aria-hidden="true"><circle class="progress-track" cx="12" cy="12" r="10"></circle><circle class="progress-path" cx="12" cy="12" r="10"></circle></svg><svg class="bento-checkmark" viewBox="0 0 24 24" aria-hidden="true"><path d="M4 12.75L9 17.75L20 6.75"></path></svg></div><h3>2. Die Diagnose</h3><p>Stasis & Tyrannei.</p></a></li>
                <li><a href="#part3" class="bento-cell" id="nav-part3"><div class="bento-icon-wrapper"><svg class="bento-progress-circle" viewBox="0 0 24 24" aria-hidden="true"><circle class="progress-track" cx="12" cy="12" r="10"></circle><circle class="progress-path" cx="12" cy="12" r="10"></circle></svg><svg class="bento-checkmark" viewBox="0 0 24 24" aria-hidden="true"><path d="M4 12.75L9 17.75L20 6.75"></path></svg></div><h3>3. Die Therapie</h3><p>Die vergessene Lösung.</p></a></li>
                <li><a href="#part4" class="bento-cell" id="nav-part4"><div class="bento-icon-wrapper"><svg class="bento-progress-circle" viewBox="0 0 24 24" aria-hidden="true"><circle class="progress-track" cx="12" cy="12" r="10"></circle><circle class="progress-path" cx="12" cy="12" r="10"></circle></svg><svg class="bento-checkmark" viewBox="0 0 24 24" aria-hidden="true"><path d="M4 12.75L9 17.75L20 6.75"></path></svg></div><h3>4. Die Heilung</h3><p>Isonomie in Aktion.</p></a></li>
                <li><a href="#part5" class="bento-cell" id="nav-part5"><div class="bento-icon-wrapper"><svg class="bento-progress-circle" viewBox="0 0 24 24" aria-hidden="true"><circle class="progress-track" cx="12" cy="12" r="10"></circle><circle class="progress-path" cx="12" cy="12" r="10"></circle></svg><svg class="bento-checkmark" viewBox="0 0 24 24" aria-hidden="true"><path d="M4 12.75L9 17.75L20 6.75"></path></svg></div><h3>5. Die Hürden</h3><p>Falsche Feindbilder.</p></a></li>
                <li><a href="#part6" class="bento-cell" id="nav-part6"><div class="bento-icon-wrapper"><svg class="bento-progress-circle" viewBox="0 0 24 24" aria-hidden="true"><circle class="progress-track" cx="12" cy="12" r="10"></circle><circle class="progress-path" cx="12" cy="12" r="10"></circle></svg><svg class="bento-checkmark" viewBox="0 0 24 24" aria-hidden="true"><path d="M4 12.75L9 17.75L20 6.75"></path></svg></div><h3>6. Der Ausblick</h3><p>Politische Mündigkeit.</p></a></li>
            </ul>
        </nav>
        <article class="focus-pane">
            <div class="narrative-thread-container" aria-hidden="true">
                <svg class="narrative-thread" preserveAspectRatio="none">
                    <path class="narrative-thread-path" d="" fill="none" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </div>
            <!-- Sections 1-6 und final-actions bleiben inhaltlich unverändert, hier gekürzt zur Übersichtlichkeit -->
            <section id="part1" aria-labelledby="nav-part1" class="content-section" data-takeaway="Die Konzentration politischer Macht in den Händen Weniger (Aristokratie) ist das Kernproblem moderner Gesellschaften und führt zu systemischem Stillstand.">
                <h2 tabindex="-1">Die Krise unserer Zeit</h2>
                <!-- ... Inhalt ... -->
            </section>
            <section id="part2" aria-labelledby="nav-part2" class="content-section" data-takeaway="Stasis (permanenter Parteienkampf) und die daraus resultierende Handlungsunfähigkeit erzeugen den Ruf nach Tyrannei (dem 'starken Mann') als vermeintliche Lösung.">
                <h2 tabindex="-1">Diagnose: Stasis &amp; Tyrannei</h2>
                <!-- ... Inhalt ... -->
            </section>
            <section id="part3" aria-labelledby="nav-part3" class="content-section" data-takeaway="Die Therapie ist die Isonomie (Gleichheit vor dem Gesetz), die durch das Losverfahren von Bürgerräten erreicht wird, um politische Privilegien aufzulösen.">
                <h2 tabindex="-1">Therapie: Die vergessene Lösung</h2>
                 <!-- ... Inhalt ... -->
            </section>
            <section id="part4" aria-labelledby="nav-part4" class="content-section" data-takeaway="Isonomie heilt die Gesellschaft, indem sie einen herrschaftsfreien Raum für Deliberation schafft, Vertrauen wiederherstellt und kollektive Handlungsfähigkeit ermöglicht.">
                <h2 tabindex="-1">Heilung: Isonomie in Aktion</h2>
                 <!-- ... Inhalt ... -->
            </section>
            <section id="part5" aria-labelledby="nav-part5" class="content-section" data-takeaway="Die größten Hürden sind falsche Feindbilder und die aristokratische Illusion, dass eine breite politische Beteiligung der Bürger zwangsläufig zu Chaos führt.">
                <h2 tabindex="-1">Die Hürden: Falsche Feindbilder</h2>
                 <!-- ... Inhalt ... -->
            </section>
            <section id="part6" aria-labelledby="nav-part6" class="content-section" data-takeaway="Der Quantensprung zur politischen Mündigkeit gelingt, indem die Last und die Lust der Politik durch das Losverfahren gerecht auf alle verteilt und so für jeden tragbar wird.">
                <h2 tabindex="-1">Ausblick: Der Quantensprung</h2>
                 <!-- ... Inhalt ... -->
            </section>
            <section id="knowledge-distillate" aria-labelledby="distillate-title">
                <h2 id="distillate-title">Ihr Wissens-Destillat</h2>
                <p>Sie haben das Dossier gemeistert. Hier sind die sechs Kernargumente auf einen Blick:</p>
                <ul></ul>
            </section>
            <div class="final-actions">
                <h2 id="final-cta">Werden Sie zum Systemwandler</h2>
                 <!-- ... Inhalt ... -->
            </div>
        </article>
    </main>
    <footer class="page-footer">
        <p>created by <a href="https://youtube.com/@deusexlumen" target="_blank" rel="noopener noreferrer">deus.ex.lumen</a> 2025</p>
    </footer>
    <div class="ui-controls-container">
        <button id="perf-toggle" class="perf-toggle-button" title="Animationen an-/ausschalten" aria-pressed="false">✨ Animationen an</button>
    </div>
    <script type="module">
        class PhoenixDossier {
            constructor() {
                gsap.registerPlugin(ScrollTrigger);

                this.DOM = {
                    body: document.body,
                    root: document.documentElement,
                    progressBar: document.querySelector('.scroll-progress-bar'),
                    liveRegion: document.querySelector('[aria-live="polite"]'),
                    sections: Array.from(document.querySelectorAll('.content-section')),
                    navLinks: Array.from(document.querySelectorAll('.bento-nav .bento-cell')),
                    perfToggleBtn: document.getElementById('perf-toggle'),
                    aurora: document.querySelector('.aurora-background'),
                    headerContent: document.querySelector('.header-content'),
                    subtitle: document.querySelector('.page-header .subtitle'),
                    audioBoxes: document.querySelectorAll('.audio-feature-box'),
                    mainContent: document.getElementById('main-content'),
                    distillateContainer: document.querySelector('#knowledge-distillate'),
                    distillateList: document.querySelector('#knowledge-distillate ul'),
                    h2s: document.querySelectorAll('.content-section h2'),
                    auroraBlobs: document.querySelectorAll('.aurora-background .blob'),
                    focusPane: document.querySelector('.focus-pane'),
                    narrativeThreadContainer: document.querySelector('.narrative-thread-container'),
                    narrativePath: document.querySelector('.narrative-thread-path'),
                };

                this.narrativeColors = {
                    part1: { primary: '#fb923c', secondary: '#f97316' },
                    part2: { primary: '#f87171', secondary: '#ef4444' },
                    part3: { primary: '#60a5fa', secondary: '#3b82f6' },
                    part4: { primary: '#4ade80', secondary: '#22c55e' },
                    part5: { primary: '#a78bfa', secondary: '#8b5cf6' },
                    part6: { primary: '#22d3ee', secondary: '#06b6d4' },
                };

                this.state = {
                    activeSectionId: null,
                    completedSections: new Set(),
                    isLowPerfMode: false,
                    isTicking: false,
                    currentColor: getComputedStyle(this.DOM.root).getPropertyValue('--primary-color').trim(),
                };

                this.audioContext = null;
                this.analysers = new Map();
                this.sources = new Map();

                this.resizeTimeout = null;
                this.debouncedRefresh = this.debounce(this.onResize.bind(this), 250);

                if (this.DOM.distillateList) {
                    this.init();
                } else {
                    console.error("Initialisierung fehlgeschlagen: Wissens-Destillat-Liste nicht gefunden.");
                }
            }

            init() {
                this.splitMainHeader();
                this.splitSectionHeaders();
                
                if (this.DOM.narrativePath) {
                    this.generateNarrativePath();
                }

                this.setupEventListeners();
                this.setupIntersectionObserver();
                this.setupCustomAudioPlayers();
                this.checkInitialPerfMode();
                this.setupBentoInteractions();
            }

            splitMainHeader() {
                const mainHeader = document.querySelector('h1.fade-up-header');
                if (mainHeader && !mainHeader.dataset.split) {
                    const originalText = mainHeader.textContent;
                    mainHeader.textContent = '';
                    originalText.split('').forEach(char => {
                        const charSpan = document.createElement('span');
                        charSpan.className = 'char';
                        charSpan.textContent = char === ' ' ? '\u00A0' : char;
                        mainHeader.appendChild(charSpan);
                    });
                    mainHeader.dataset.split = 'true';
                }
            }

            splitSectionHeaders() {
                this.DOM.h2s.forEach(h2 => {
                    if (h2.dataset.split) return;
                    const originalText = h2.textContent;
                    h2.textContent = '';
                    const words = originalText.split(' ');
                    words.forEach((word, index) => {
                        const wordSpan = document.createElement('span');
                        wordSpan.className = 'word';
                        word.split('').forEach(char => {
                            const charSpan = document.createElement('span');
                            charSpan.className = 'char';
                            charSpan.textContent = char;
                            wordSpan.appendChild(charSpan);
                        });
                        h2.appendChild(wordSpan);
                        if (index < words.length - 1) {
                           h2.appendChild(document.createTextNode(' '));
                        }
                    });
                    h2.dataset.split = 'true';
                });
            }

            generateNarrativePath() {
                if (!this.DOM.narrativePath || !this.DOM.focusPane || this.DOM.sections.length === 0) return;

                const pathX = 20;
                let pathData = `M ${pathX} 0`;

                this.DOM.sections.forEach((section) => {
                    const h2 = section.querySelector('h2');
                    if (!h2) return;
                    // KORREKTUR: Robuste Positionierung via offsetTop
                    const h2Y = h2.offsetTop + (h2.offsetHeight / 2);
                    pathData += ` L ${pathX} ${h2Y}`;
                });

                const totalHeight = this.DOM.focusPane.scrollHeight;
                pathData += ` L ${pathX} ${totalHeight}`;

                this.DOM.narrativePath.setAttribute('d', pathData);
                this.DOM.narrativePath.closest('svg').style.height = `${totalHeight}px`;
            }

            onResize() {
                if (this.DOM.narrativePath) {
                    this.generateNarrativePath();
                }
                ScrollTrigger.refresh();
            }

            setupAnimations() {
                const mainHeader = document.querySelector('h1.fade-up-header');
                const chars = mainHeader ? mainHeader.querySelectorAll('.char') : null;

                if (chars && chars.length > 0) {
                    const tl = gsap.timeline({delay: 0.2});
                    tl.to(mainHeader, { '--underline-width': '100%', duration: 1.2, ease: 'power4.out' }, 0);
                    tl.from(chars, { yPercent: 100, opacity: 0, stagger: 0.05, duration: 0.8, ease: 'power2.out' }, 0.2);
                    gsap.from(this.DOM.subtitle, { autoAlpha: 0, y: 20, duration: 1, ease: 'power3.out', delay: 0.8 });
                }

                gsap.to(this.DOM.auroraBlobs[0], { duration: 20, x: "+=120", y: "-=80", rotation: 45, scale: 1.25, repeat: -1, yoyo: true, ease: "sine.inOut" });
                gsap.to(this.DOM.auroraBlobs[1], { duration: 25, x: "-=100", y: "+=100", rotation: -35, scale: 0.8, repeat: -1, yoyo: true, ease: "sine.inOut" });

                if (window.matchMedia("(min-width: 1025px)").matches) {
                    const bentoNav = document.querySelector('.bento-nav');
                    if (bentoNav) {
                        gsap.to(bentoNav, { y: (i, target) => -(target.offsetHeight - window.innerHeight + 100), ease: "none", scrollTrigger: { trigger: this.DOM.mainContent, start: "top top", end: `bottom-=${window.innerHeight} bottom`, scrub: 1.8, invalidateOnRefresh: true } });
                    }
                }

                gsap.to(this.DOM.headerContent, { scrollTrigger: { trigger: ".page-header", start: "top top", end: "bottom top", scrub: 1 }, y: 200, opacity: 0, ease: 'none' });

                this.DOM.sections.forEach(section => {
                    const sectionId = section.id;
                    const colors = this.narrativeColors[sectionId];
                    const h2Element = section.querySelector('h2');

                    if (h2Element) {
                        const h2chars = h2Element.querySelectorAll('.char');
                        const tl = gsap.timeline({ scrollTrigger: { trigger: h2Element, start: 'top 85%', toggleActions: 'play none none reverse' } });
                        tl.from(h2chars, { yPercent: 100, rotationZ: 8, opacity: 0, ease: 'circ.out', duration: 0.8, stagger: { amount: 0.4, from: "start" } }, 0);
                        tl.fromTo(h2Element, { '--underline-scale': 0 }, { '--underline-scale': 1, duration: 1, ease: 'expo.out' }, 0.1);
                    }

                    const animatedElements = section.querySelectorAll('p, h4, .audio-feature-box');
                    if (animatedElements.length > 0) {
                        gsap.from(animatedElements, { scrollTrigger: { trigger: section, start: 'top 85%', toggleActions: 'play none none reverse' }, opacity: 0, y: 40, duration: 0.9, ease: 'power3.out', stagger: 0.1 });
                    }

                    if (colors) {
                        ScrollTrigger.create({ trigger: section, start: "top 40%", end: "bottom 40%", onEnter: () => this.animateColors(colors), onEnterBack: () => this.animateColors(colors) });
                    }
                    const navLink = this.DOM.navLinks.find(link => link.hash === `#${sectionId}`);
                    if (navLink) {
                        const progressPath = navLink.querySelector('.bento-progress-circle .progress-path');
                        if (progressPath) {
                            gsap.to(progressPath, { scrollTrigger: { trigger: section, start: "top center", end: "bottom bottom", scrub: true }, strokeDashoffset: 0, ease: 'none' });
                        }
                    }
                });

                if (this.DOM.narrativePath && !this.state.isLowPerfMode) {
                    const pathLength = this.DOM.narrativePath.getTotalLength();
                    if (pathLength > 0) {
                        this.DOM.narrativePath.style.strokeDasharray = pathLength;
                        this.DOM.narrativePath.style.strokeDashoffset = pathLength;
                        gsap.to(this.DOM.narrativePath, {
                            strokeDashoffset: 0,
                            ease: "none",
                            scrollTrigger: {
                                trigger: this.DOM.focusPane,
                                start: "top top",
                                end: "bottom bottom",
                                scrub: 1,
                                invalidateOnRefresh: true
                            }
                        });
                    }
                }
                 // ... (Rest der Animationen wie final-actions)
            }
            
            // Die restlichen Methoden (debounce, onScroll, etc.) bleiben unverändert
            // und werden hier zur Kürze weggelassen.
        }

        document.addEventListener('DOMContentLoaded', () => new PhoenixDossier());
    </script>
</body>
</html>
